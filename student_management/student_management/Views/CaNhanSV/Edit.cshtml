@model student_management.Models.SinhVien
@{
    ViewData["Title"] = "Chỉnh sửa thông tin cá nhân";
}

<div class="container mt-4">
    <h3 class="text-primary text-center fw-bold mb-4">Chỉnh sửa thông tin cá nhân</h3>

    <form asp-action="Edit" method="post" enctype="multipart/form-data" class="row g-4">
        <div class="col-md-4 text-center">
            <img src="@(Model.Anh ?? "/images/sinhvien/default.png")"
                 class="img-thumbnail rounded"
                 style="max-height:220px; object-fit:cover;"
                 id="previewImg" />

            <div class="mt-2">
                <input type="file" name="AnhUpload" class="form-control" accept="image/*" onchange="loadFile(event)" />
            </div>
        </div>

        <div class="col-md-8">

            <!-- Mã sinh viên -->
            <input type="hidden" name="MaSv" value="@Model.MaSv" />

            <label class="form-label">Họ và tên</label>
            <input type="text" name="HoTen" value="@Model.HoTen" class="form-control" required />

            <label class="form-label mt-2">Ngày sinh</label>
            <input type="date" name="NgaySinh" value="@Model.NgaySinh?.ToString("yyyy-MM-dd")" class="form-control" required />

            <label class="form-label mt-2">Email</label>
            <input type="email" name="Email" value="@Model.Email" class="form-control" />

            <label class="form-label mt-2">Số điện thoại</label>
            <input type="text" name="SoDienThoai" value="@Model.SoDienThoai" class="form-control" />

            <label class="form-label mt-2">Lớp</label>
            <input type="text" value="@Model.MaLopNavigation?.TenLop" class="form-control" disabled />

            <label class="form-label mt-2">Khoa</label>
            <input type="text" value="@Model.MaKhoaNavigation?.TenKhoa" class="form-control" disabled />

            <div class="mt-3">
                <button type="submit" class="btn btn-success px-4">Lưu</button>
                <a asp-action="Index" class="btn btn-secondary px-4">Hủy</a>
            </div>
        </div>
    </form>
</div>

<script>
    function loadFile(event) {
        var output = document.getElementById('previewImg');
        output.src = URL.createObjectURL(event.target.files[0]);
    }
</script>
